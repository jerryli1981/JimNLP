package platform.pipe.iterator;

import java.io.File;
import java.util.ArrayList;
import java.util.Iterator;

import platform.types.Instance;

public class OneInstancePerFileIterator implements Iterator<Instance> {
	
	protected Iterator<File> fileIterator;
	
	public OneInstancePerFileIterator(Iterator<File> fileIterator){
		this.fileIterator = fileIterator;
	}
	public OneInstancePerFileIterator(String dir){
	
		File d = new File(dir);
		File[] fl = d.listFiles();
		ArrayList<File> fs = new ArrayList<File>();
		for(int i=0; i<fl.length; i++){
			fs.add(fl[i]);
		}
		fileIterator = fs.iterator();
	}

	@Override
	public boolean hasNext() {
		// TODO Auto-generated method stub
		return fileIterator.hasNext();
	}

	@Override
	public Instance next() {
		File f = fileIterator.next();
		String name = f.getName();
		return new Instance(f, null, name);
	}

	@Override
	public void remove() {
		throw new IllegalStateException("Not supported");
	}

}
